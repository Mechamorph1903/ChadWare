<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="ChadWare.Views.Pages.CartPage"
    Title="Cart"
    BackgroundColor="#f2f2f2">

    <NavigationPage.BackButtonTitle>Back</NavigationPage.BackButtonTitle>

    <ScrollView>
        <VerticalStackLayout Padding="10" Spacing="15">

            <!-- Top Logo and Cart Title -->
            <Grid ColumnDefinitions="Auto,*,Auto" VerticalOptions="Center" HeightRequest="60">
                <Image Source="chadwarelogo.png" HeightRequest="50" />
                <Label Text="Cart" FontSize="24" FontAttributes="Bold" HorizontalOptions="Center" VerticalOptions="Center" />
                <ImageButton Source="usericon.png" HeightRequest="40" WidthRequest="40" BackgroundColor="Transparent" />
            </Grid>

            <!-- Navigation Tabs -->
            <HorizontalStackLayout HorizontalOptions="Center" Spacing="15">
                <Button Text="Men" BackgroundColor="Transparent" TextColor="Black" FontAttributes="Bold" Clicked="OnMenTapped"/>
                <Button Text="Women" BackgroundColor="Transparent" TextColor="Black" FontAttributes="Bold" Clicked="OnWomenTapped"/>
                <Button Text="Trending" BackgroundColor="Transparent" TextColor="Black" FontAttributes="Bold"/>
                <Button Text="Sale" BackgroundColor="Transparent" TextColor="Red" FontAttributes="Bold"/>
                <ImageButton Source="cart.png" HeightRequest="30" BackgroundColor="Transparent" />
            </HorizontalStackLayout>

            <!-- Cart Items -->
            <CollectionView x:Name="CartCollectionView" SelectionMode="None" Margin="0,20,0,0">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Border Stroke="#ccc" BackgroundColor="White" Margin="5" Padding="10">
                            <Grid ColumnDefinitions="*,Auto,Auto" RowDefinitions="Auto,Auto">
                                <Label Grid.Row="0" Grid.Column="0" Text="{Binding ProductName}" FontAttributes="Bold" FontSize="16" />

                                <Label Grid.Row="0" Grid.Column="1" Text="{Binding UnitPrice, StringFormat='${0:F2}'}" FontSize="14" HorizontalOptions="End" />
                                <Button Grid.Row="1" Grid.Column="1" Text="Remove" TextColor="Red" BackgroundColor="Transparent" CommandParameter="{Binding .}" Clicked="OnRemoveClicked"/>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>

                <CollectionView.EmptyView>
                    <VerticalStackLayout Padding="20" HorizontalOptions="Center" VerticalOptions="CenterAndExpand">
                        <Label Text="Your cart is empty." FontSize="20" TextColor="Gray" />
                    </VerticalStackLayout>
                </CollectionView.EmptyView>

            </CollectionView>

            <!-- Total Price -->
            <HorizontalStackLayout HorizontalOptions="End" Spacing="10" Padding="10,20,10,10">
                <Label Text="Total:" FontAttributes="Bold" FontSize="18" />
                <Label x:Name="TotalLabel" FontAttributes="Bold" FontSize="18" />
            </HorizontalStackLayout>

            <!-- Checkout Button -->
            <Button
          Text="Checkout"
          BackgroundColor="Green"
          TextColor="White"
          FontAttributes="Bold"
          CornerRadius="20"
          Margin="20"
          Clicked="OnCheckoutClicked" />

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
